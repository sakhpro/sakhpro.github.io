var VimeoState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3};_V_.vimeo=_V_.PlaybackTech.extend({init:function(player,options){this.player=player;var source=options.source;var videoId=this.getVideoId(source.src);var parentEl=options.parentEl;var objId=player.el.id+"_vimeo_api";var iFrm=this.el=_V_.createElement("iframe",{id:objId+"_iframe",name:objId+"_iframe",className:"vjs-tech",scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0,webkitAllowFullScreen:"",mozallowfullscreen:"",allowFullScreen:""});var playerOptions=player.options;var optionsParams=options.params||{};this.player.apiArgs={api:1,byline:0,portrait:0,show_title:0,show_byline:0,show_portrait:0,fullscreen:1,player_id:objId+"_iframe",color:optionsParams.color||playerOptions.color||"ffffff",autoplay:this.toBoolInt(optionsParams.autoplay||playerOptions.autoplay),loop:this.toBoolInt(optionsParams.loop||playerOptions.loop)};this.player.vimeoInfo={};_V_.insertFirst(iFrm,parentEl);this.loadPlayer(videoId);},loadPlayer:function(videoId){var baseUrl=(document.location.protocol=="https:")?"https://secure.vimeo.com/video/":"http://player.vimeo.com/video/";_V_.addEvent(this.el,"load",_V_.proxy(this,function(){this.vimeo=$f(this.el);this.player.vimeoInfo={state:VimeoState.UNSTARTED,volume:1,muted:false,muteVolume:1,time:0,duration:0,buffered:0,url:baseUrl+videoId,error:null};this.vimeo.addEvent("ready",_V_.vimeo.onReady);this.vimeo.addEvent("loadProgress",_V_.vimeo.onLoadProgress);this.vimeo.addEvent("playProgress",_V_.vimeo.onPlayProgress);this.vimeo.addEvent("play",_V_.vimeo.onPlay);this.vimeo.addEvent("pause",_V_.vimeo.onPause);this.vimeo.addEvent("finish",_V_.vimeo.onFinish);this.vimeo.addEvent("seek",_V_.vimeo.onSeek);}));this.el.src=baseUrl+videoId+"?"+this.makeQueryString(this.player.apiArgs);},destroy:function(){this.vimeo.api("unload");delete this.vimeo;this.el.parentNode.removeChild(this.el);},play:function(){this.vimeo.api("play");},pause:function(){this.vimeo.api("pause");},paused:function(){var state=this.player.vimeoInfo.state;return state!==VimeoState.PLAYING&&state!==VimeoState.BUFFERING;},src:function(src){var videoId=this.getVideoId(src);this.loadPlayer(videoId);},load:function(){},poster:function(){return null;},currentTime:function(){return this.player.vimeoInfo.time||0;},setCurrentTime:function(seconds){this.vimeo.api("seekTo",seconds);},duration:function(){return this.player.vimeoInfo.duration||0;},buffered:function(){return _V_.createTimeRange(0,this.player.vimeoInfo.buffered||0);},volume:function(){return(this.player.vimeoInfo.muted)?this.player.vimeoInfo.muteVolume:this.player.vimeoInfo.volume;},setVolume:function(percentAsDecimal){this.vimeo.api("setVolume",percentAsDecimal);this.player.vimeoInfo.volume=percentAsDecimal;this.player.triggerEvent("volumechange");},muted:function(){return this.player.vimeoInfo.muted||false;},setMuted:function(muted){if(muted){this.player.vimeoInfo.muteVolume=this.player.vimeoInfo.volume;this.setVolume(0);}else{this.setVolume(this.player.vimeoInfo.muteVolume);}this.player.vimeoInfo.muted=muted;this.player.triggerEvent("volumechange");},width:function(){return this.el.offsetWidth;},height:function(){return this.el.offsetHeight;},currentSrc:function(){return this.player.vimeoInfo.url;},preload:function(){return false;},setPreload:function(val){},autoplay:function(){return !!this.player.apiArgs.autoplay;},setAutoplay:function(val){},loop:function(){return !!this.player.apiArgs.loop;},setLoop:function(val){this.player.apiArgs.loop=(val?1:0);},supportsFullScreen:function(){return false;},enterFullScreen:function(){return false;},error:function(){return this.player.vimeoInfo.error;},seeking:function(){return false;},ended:function(){return this.player.vimeoInfo.state===VimeoState.ENDED;},videoWidth:function(){return this.width();},videoHeight:function(){return this.height();},controls:function(){return this.player.options.controls;},defaultMuted:function(){return false;},makeQueryString:function(args){var array=[];for(var key in args){if(args.hasOwnProperty(key)){array.push(encodeURIComponent(key)+"="+encodeURIComponent(args[key]));}}return array.join("&");},getVideoId:function(url){return url.match(/vimeo\.com\/(?:.*#|.*\/videos\/)?([0-9]+)/)[1];},toBoolInt:function(val){return val?1:0;}});_V_.vimeo.onReady=function(id){var player=_V_.el(id).parentNode.player;player.tech.triggerReady();player.triggerReady();player.triggerEvent("canplay");_V_.vimeo.hideOverlay(player);player.controlBar.hide();};_V_.vimeo.onLoadProgress=function(data,id){var player=_V_.el(id).parentNode.player;var durationUpdate=!player.vimeoInfo.duration;player.vimeoInfo.duration=data.duration;player.vimeoInfo.buffered=data.percent;player.triggerEvent("progress");if(durationUpdate){player.triggerEvent("durationchange");}};_V_.vimeo.onPlayProgress=function(data,id){var player=_V_.el(id).parentNode.player;player.vimeoInfo.time=data.seconds;player.triggerEvent("timeupdate");};_V_.vimeo.onPlay=function(id){var player=_V_.el(id).parentNode.player;player.vimeoInfo.state=VimeoState.PLAYING;player.triggerEvent("play");};_V_.vimeo.onPause=function(id){var player=_V_.el(id).parentNode.player;player.vimeoInfo.state=VimeoState.PAUSED;player.triggerEvent("pause");};_V_.vimeo.onFinish=function(id){var player=_V_.el(id).parentNode.player;player.vimeoInfo.state=VimeoState.ENDED;player.triggerEvent("ended");_V_.vimeo.hideOverlay(player);if(player.apiArgs.loop){player.tech.vimeo.api("play");}else{player.tech.vimeo.api("seekTo",0);player.tech.vimeo.api("play");player.tech.vimeo.api("pause");}};_V_.vimeo.onSeek=function(data,id){var player=_V_.el(id).parentNode.player;player.vimeoInfo.time=data.seconds;player.triggerEvent("timeupdate");player.triggerEvent("seeked");};_V_.vimeo.hideOverlay=function(player){player.bigPlayButton.hide();player.posterImage.hide();};_V_.vimeo.isSupported=function(){return true;};_V_.vimeo.canPlaySource=function(srcObj){return srcObj.type=="video/vimeo";};_V_.vimeo.prototype.support={formats:{"video/vimeo":"VIM"},progressEvent:true,timeupdateEvent:true,movingElementInDOM:!_V_.isIOS(),fullscreenResize:true,parentResize:true};var Froogaloop=(function(){function Froogaloop(iframe){return new Froogaloop.fn.init(iframe);}var eventCallbacks={},hasWindowEvent=false,isReady=false,slice=Array.prototype.slice,playerDomain="";Froogaloop.fn=Froogaloop.prototype={element:null,init:function(iframe){if(typeof iframe==="string"){iframe=document.getElementById(iframe);}this.element=iframe;playerDomain=getDomainFromUrl(this.element.getAttribute("src"));return this;},api:function(method,valueOrCallback){if(!this.element||!method){return false;}var self=this,element=self.element,target_id=element.id!==""?element.id:null,params=!isFunction(valueOrCallback)?valueOrCallback:null,callback=isFunction(valueOrCallback)?valueOrCallback:null;if(callback){storeCallback(method,callback,target_id);}postMessage(method,params,element);return self;},addEvent:function(eventName,callback){if(!this.element){return false;}var self=this,element=self.element,target_id=element.id!==""?element.id:null;storeCallback(eventName,callback,target_id);if(eventName!="ready"){postMessage("addEventListener",eventName,element);}else{if(eventName=="ready"&&isReady){callback.call(null,target_id);}}return self;},removeEvent:function(eventName){if(!this.element){return false;}var self=this,element=self.element,target_id=element.id!==""?element.id:null,removed=removeCallback(eventName,target_id);if(eventName!="ready"&&removed){postMessage("removeEventListener",eventName,element);}}};function postMessage(method,params,target){if(!target.contentWindow.postMessage){return false;}var url=target.getAttribute("src").split("?")[0],data=JSON.stringify({method:method,value:params});if(url.substr(0,2)==="//"){url=window.location.protocol+url;}target.contentWindow.postMessage(data,url);}function onMessageReceived(event){var data,method;try{data=JSON.parse(event.data);method=data.event||data.method;}catch(e){}if(method=="ready"&&!isReady){isReady=true;}if(event.origin!=playerDomain){return false;}var value=data.value,eventData=data.data,target_id=target_id===""?null:data.player_id,callback=getCallback(method,target_id),params=[];if(!callback){return false;}if(value!==undefined){params.push(value);}if(eventData){params.push(eventData);}if(target_id){params.push(target_id);}return params.length>0?callback.apply(null,params):callback.call();}function storeCallback(eventName,callback,target_id){if(target_id){if(!eventCallbacks[target_id]){eventCallbacks[target_id]={};}eventCallbacks[target_id][eventName]=callback;}else{eventCallbacks[eventName]=callback;}}function getCallback(eventName,target_id){if(target_id){return eventCallbacks[target_id][eventName];}else{return eventCallbacks[eventName];}}function removeCallback(eventName,target_id){if(target_id&&eventCallbacks[target_id]){if(!eventCallbacks[target_id][eventName]){return false;}eventCallbacks[target_id][eventName]=null;}else{if(!eventCallbacks[eventName]){return false;}eventCallbacks[eventName]=null;}return true;}function getDomainFromUrl(url){if(url.substr(0,2)==="//"){url=window.location.protocol+url;}var url_pieces=url.split("/"),domain_str="";for(var i=0,length=url_pieces.length;i<length;i++){if(i<3){domain_str+=url_pieces[i];}else{break;}if(i<2){domain_str+="/";}}return domain_str;}function isFunction(obj){return !!(obj&&obj.constructor&&obj.call&&obj.apply);}function isArray(obj){return toString.call(obj)==="[object Array]";}Froogaloop.fn.init.prototype=Froogaloop.fn;if(window.addEventListener){window.addEventListener("message",onMessageReceived,false);}else{window.attachEvent("onmessage",onMessageReceived);}return(window.Froogaloop=window.$f=Froogaloop);})();